@model Data.ViewModels.AdminDashboardDTO;
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<!-- Page Wrapper -->
<div class="page-wrapper">
	<div class="content">

		<!-- Breadcrumb -->
		<div class="d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-3">
			<div class="my-auto mb-2">
				<h2 class="mb-1">Admin Dashboard</h2>
				<nav>
					<ol class="breadcrumb mb-0">
						<li class="breadcrumb-item">
							<a href="index.html"><i class="ti ti-smart-home"></i></a>
						</li>
						<li class="breadcrumb-item">
							Dashboard
						</li>
					</ol>
				</nav>
			</div>
		</div>
		<!-- /Breadcrumb -->
		<!-- Welcome Wrap -->
		<div class="card border-0">
			<div class="card-body d-flex align-items-center justify-content-between flex-wrap pb-1">
				<div class="d-flex align-items-center mb-3">
					<span class="avatar avatar-xl flex-shrink-0">
						<img src="~/template/assets/img/profiles/avatar-31.jpg" class="rounded-circle" alt="img">
					</span>
					<div class="ms-3">
						<h3 class="mb-2">Welcome Back, @Model.UserName <a href="javascript:void(0);" class="edit-icon"><i class="ti ti-edit fs-14"></i></a></h3>
						<p>You have <span class="text-primary text-decoration-underline">@Model.PendingResultCount</span> Pending Approvals
					</div>
				</div>
				<div class="d-flex align-items-center flex-wrap mb-1">
					<a href="#" class="btn btn-secondary btn-md me-2 mb-2" data-bs-toggle="modal" data-bs-target="#add_report"><i class="ti ti-square-rounded-plus me-1"></i>Add Result</a>
					<a href="#" class="btn btn-primary btn-md mb-2" data-bs-toggle="modal" data-bs-target="#add_User"><i class="ti ti-square-rounded-plus me-1"></i>Add Researcher</a>
				</div>
			</div>
		</div>
		<!-- /Welcome Wrap -->

		<div class="row">

			<!-- Widget Info -->
			<div class="col-xxl-12 d-flex">
				<div class="row flex-fill">
					<div class="col-md-3 d-flex">
						<div class="card flex-fill">
							<div class="card-body">
								<span class="avatar rounded-circle bg-primary mb-2">
									<i class="ti ti-calendar-share fs-16"></i>
								</span>
								<h6 class="fs-13 fw-medium text-default mb-1">Result Overview</h6>
								<h3 class="mb-3">@Model.AllResultCount <span class="fs-12 fw-medium text-success"><i class="fa-solid fa-caret-up me-1"></i></span></h3>
								<a href="/Report/Index" class="link-default">View Details</a>
							</div>
						</div>
					</div>
					<div class="col-md-3 d-flex">
						<div class="card flex-fill">
							<div class="card-body">
								<span class="avatar rounded-circle bg-secondary mb-2">
									<i class="ti ti-browser fs-16"></i>
								</span>
								<h6 class="fs-13 fw-medium text-default mb-1">Pending Results</h6>
								<h3 class="mb-3">@Model.PendingResultCount <span class="fs-12 fw-medium text-danger"><iRejected"fa-solid fa-caret-down me-1"></i></span></h3>
								<a href="#" class="link-default">View All</a>
							</div>
						</div>
					</div>
					<div class="col-md-3 d-flex">
						<div class="card flex-fill">
							<div class="card-body">
								<span class="avatar rounded-circle bg-secondary mb-2">
									<i class="ti ti-browser fs-16"></i>
								</span>
								<h6 class="fs-13 fw-medium text-default mb-1">Rejected Results</h6>
								<h3 class="mb-3">@Model.RejectedResultCount <span class="fs-12 fw-medium text-danger"><iRejected"fa-solid fa-caret-down me-1"></i></span></h3>
								<a href="#" class="link-default">View All</a>
							</div>
						</div>
					</div>
					<div class="col-md-3 d-flex">
						<div class="card flex-fill">
							<div class="card-body">
								<span class="avatar rounded-circle bg-info mb-2">
									<i class="ti ti-users-group fs-16"></i>
								</span>
								<h6 class="fs-13 fw-medium text-default mb-1">Total No of Clients</h6>
								<h3 class="mb-3">@Model.ClientCount <span class="fs-12 fw-medium text-success"><i class="fa-solid fa-caret-up me-1"></i></span></h3>
								<a href="/Report/Researcher" class="link-default">View All</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- /Widget Info -->
		</div>

		<div class="row">
			<div class="col-xxl-6 col-xl-6 d-flex">
				<div class="card flex-fill">
					<div class="card-header pb-2 d-flex align-items-center justify-content-between flex-wrap">
						<h5 class="mb-2">Recent Results</h5>
						<a href="/Report/Index" class="btn btn-light btn-md mb-2">View All</a>
					</div>
					<div class="card-body">
						@if (Model.Reports != null & Model?.Reports?.Count > 0)
						{
							@foreach (var report in Model?.Reports)
							{
								<div class="recent-item">
									<div class="d-flex justify-content-between">
										<div class="d-flex align-items-center w-100">
											<a href="javscript:void(0);" class="avatar  flex-shrink-0">
												<img src="~/template/assets/img/users/user-38.jpg" class="rounded-circle" alt="img">
											</a>
											<div class="ms-2 flex-fill">
												<div class="d-flex align-items-center justify-content-between">
													<h6 class="fs-medium text-truncate"><a href="javscript:void(0);">@report.PatientName</a></h6>
													<p class="fs-13">@report.DateCreated</p>
												</div>
												<p class="fs-13 text-primary">@report.Exam</p>
											</div>
										</div>
									</div>
								</div>
							}
						}
					</div>
				</div>
			</div>
			<div class="col-xxl-6 col-xl-6 d-flex">
				<div class="card flex-fill">
					<div class="card-header pb-2 d-flex align-items-center justify-content-between flex-wrap">
						<h5 class="mb-2">Pending Results</h5>
						<a href="javascript:void(0);" class="btn btn-light btn-md mb-2">View All</a>
					</div>
					<div class="card-body pb-1">
						@if (Model.Reports != null & Model?.Reports?.Count > 0)
						{
							@foreach (var report in Model?.PendingReports)
							{
								<h6 class="mb-2">@report.DateCreated</h6>
								<div class="bg-light p-2 border border-dashed rounded-top mb-3">
									<div class="d-flex align-items-center justify-content-between">
										<div class="d-flex align-items-center">
											<a href="javascript:void(0);" class="avatar">
												<img src="~/template/assets/img/users/user-38.jpg" class="rounded-circle" alt="img">
											</a>
											<div class="ms-2 overflow-hidden">
												<h6 class="fs-medium">@report.PatientName</h6>
												<p class="text-primary fs-13">@report.Exam</p>
											</div>
										</div>
										<a data-bs-toggle="modal" data-bs-target="#approve_modal" class="btn btn-secondary btn-xs" onclick="loadReportId('@report.Id')"><i class="fa-solid fa-thumbs-up me-1"></i>Approve</a>
									</div>
								</div>
							}
						}
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- /Page Wrapper -->

<div class="modal fade" id="add_report">
	<div class="modal-dialog modal-dialog-centered modal-md">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">Upload Files</h4>
				<button type="button" class="btn-close custom-btn-close" data-bs-dismiss="modal" aria-label="Close">
					<i class="ti ti-x"></i>
				</button>
			</div>
			<div class="modal-body pb-0">
				<div class="row">
					<div class="col-md-12">
						<div class="mb-3">
							<label class="form-label">Choose file(s)</label>
							<input type="file" class="form-control" id="files" name="files" multiple />
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-light me-2" data-bs-dismiss="modal">Cancel</button>
				<button type="submit" onclick="saveReport('true')" id="submit_btn" class="btn btn-primary">Upload</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="add_User">
	<div class="modal-dialog modal-dialog-centered modal-md">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">Register User</h4>
				<button type="button" class="btn-close custom-btn-close" data-bs-dismiss="modal" aria-label="Close">
					<i class="ti ti-x"></i>
				</button>
			</div>
			<div class="modal-body pb-0 ">
				<div class="row">
					<div class="col-md-12">
						<div class="mb-3">
							<label class="form-label">Full Name <span class="text-danger"> *</span></label>
							<input type="text" class="form-control" id="fullName" />
						</div>
					</div>

					<div class="col-md-12">
						<div class="mb-3">
							<label class="form-label">Email<span class="text-danger"> *</span></label>
							<input type="text" class="form-control" id="email" />
						</div>
					</div>
					<div class="col-md-12">
						<div class="mb-3">
							<label class="form-label">Phone Number</label>
							<input type="text" class="form-control" id="phone" />
						</div>
					</div>
					<div class="col-md-12">
						<div class="mb-3 ">
							<label class="form-label">Log In Duration <span class="text-danger"> *</span></label>
							<select class="select" id="duration">
								<option>Select</option>
								<option>Two Weeks</option>
								<option>One Week</option>
								<option>Never</option>
							</select>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-outline-light border me-2" data-bs-dismiss="modal">Cancel</button>
				<button type="submit" onclick="registerUser()" id="submit_btn" class="btn btn-primary">Save </button>
			</div>
		</div>
	</div>
</div>
<!-- Approve Modal -->
<div class="modal fade" id="approve_modal">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-body text-center">
				<input id="reportId" hidden />
				<span class="avatar avatar-xl bg-transparent-success text-success mb-3">
					<i class="ti ti-trash-x fs-36"></i>
				</span>
				<h4 class="mb-1">Confirm Approve</h4>
				<p class="mb-3">Are you sure want to approve this report?</p>
				<div class="d-flex justify-content-center">
					<a href="javascript:void(0);" class="btn btn-light me-3" data-bs-dismiss="modal">Cancel</a>
					<a href="#" class="btn btn-success" id="aprrove_btn" onclick="rejectAcceptReport(true)">Yes, Approve</a>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- /Approve Modal -->